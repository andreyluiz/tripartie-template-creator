var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function r(e){e.forEach(t)}function l(e){return"function"==typeof e}function i(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function s(e,t){e.appendChild(t)}function o(e,t,n){e.insertBefore(t,n||null)}function a(e){e.parentNode.removeChild(e)}function c(e){return document.createElement(e)}function u(e){return document.createTextNode(e)}function d(){return u(" ")}function p(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function f(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function v(e){return""===e?null:+e}function h(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function m(e,t){e.value=null==t?"":t}function g(e,t){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t)return void(r.selected=!0)}}function y(e,t,n){e.classList[n?"add":"remove"](t)}let $;function b(e){$=e}function x(e){(function(){if(!$)throw new Error("Function called outside component initialization");return $})().$$.on_mount.push(e)}const _=[],C=[],I=[],w=[],E=Promise.resolve();let k=!1;function A(e){I.push(e)}let S=!1;const T=new Set;function U(){if(!S){S=!0;do{for(let e=0;e<_.length;e+=1){const t=_[e];b(t),L(t.$$)}for(b(null),_.length=0;C.length;)C.pop()();for(let e=0;e<I.length;e+=1){const t=I[e];T.has(t)||(T.add(t),t())}I.length=0}while(_.length);for(;w.length;)w.pop()();k=!1,S=!1,T.clear()}}function L(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(A)}}const D=new Set;function P(e,t){-1===e.$$.dirty[0]&&(_.push(e),k||(k=!0,E.then(U)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function K(i,s,o,c,u,d,p,f=[-1]){const v=$;b(i);const h=i.$$={fragment:null,ctx:null,props:d,update:e,not_equal:u,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(v?v.$$.context:s.context||[]),callbacks:n(),dirty:f,skip_bound:!1,root:s.target||v.$$.root};p&&p(h.root);let m=!1;if(h.ctx=o?o(i,s.props||{},((e,t,...n)=>{const r=n.length?n[0]:t;return h.ctx&&u(h.ctx[e],h.ctx[e]=r)&&(!h.skip_bound&&h.bound[e]&&h.bound[e](r),m&&P(i,e)),t})):[],h.update(),m=!0,r(h.before_update),h.fragment=!!c&&c(h.ctx),s.target){if(s.hydrate){const e=function(e){return Array.from(e.childNodes)}(s.target);h.fragment&&h.fragment.l(e),e.forEach(a)}else h.fragment&&h.fragment.c();s.intro&&((g=i.$$.fragment)&&g.i&&(D.delete(g),g.i(y))),function(e,n,i,s){const{fragment:o,on_mount:a,on_destroy:c,after_update:u}=e.$$;o&&o.m(n,i),s||A((()=>{const n=a.map(t).filter(l);c?c.push(...n):r(n),e.$$.on_mount=[]})),u.forEach(A)}(i,s.target,s.anchor,s.customElement),U()}var g,y;b(v)}function N(e){let t,n,r=e[10].text+"";return{c(){t=c("div"),n=u(r),f(t,"class","message svelte-dhvrur"),y(t,"error",e[10].error)},m(e,r){o(e,t,r),s(t,n)},p(e,l){1024&l&&r!==(r=e[10].text+"")&&h(n,r),1024&l&&y(t,"error",e[10].error)},d(e){e&&a(t)}}}function O(e){let t,n;return{c(){t=c("button"),n=u("Create"),t.disabled=e[9],f(t,"type","submit"),f(t,"class","svelte-dhvrur")},m(e,r){o(e,t,r),s(t,n)},p(e,n){512&n&&(t.disabled=e[9])},d(e){e&&a(t)}}}function j(t){let n;return{c(){n=c("h4"),n.textContent="Loading..."},m(e,t){o(e,n,t)},p:e,d(e){e&&a(n)}}}function R(t){let n,l,i,y,$,b,x,_,C,I,w,E,k,S,T,U,L,D,P,K,R,F,W,q,J,z,B,H,M,G,Q,V,X,Y,Z,ee,te,ne,re,le,ie,se,oe,ae,ce,ue,de,pe,fe,ve,he,me,ge,ye,$e,be,xe,_e,Ce=t[10].text&&N(t);function Ie(e,t){return e[11]?j:O}let we=Ie(t),Ee=we(t);return{c(){n=c("main"),Ce&&Ce.c(),l=d(),i=c("h3"),i.textContent="Input data below",y=d(),$=c("form"),b=c("div"),x=c("label"),x.textContent="API Key",_=d(),C=c("input"),I=d(),w=c("div"),E=c("label"),E.textContent="Title",k=d(),S=c("input"),T=d(),U=c("div"),L=c("label"),L.textContent="Description",D=d(),P=c("textarea"),K=d(),R=c("div"),F=c("label"),F.textContent="Currency",W=d(),q=c("select"),J=c("option"),J.textContent="Euro",z=c("option"),z.textContent="Swiss Franc",B=d(),H=c("div"),M=c("label"),G=u("Price in "),Q=u(t[3]),V=d(),X=c("input"),Y=d(),Z=c("div"),ee=c("label"),ee.textContent="Template ID",te=d(),ne=c("input"),re=d(),le=c("div"),ie=c("label"),ie.textContent="Seller ID",se=d(),oe=c("input"),ae=d(),ce=c("div"),ue=c("label"),ue.textContent="Seller E-mail",de=d(),pe=c("input"),fe=d(),ve=c("div"),he=c("label"),he.textContent="Listing URL",me=d(),ge=c("input"),ye=d(),Ee.c(),$e=d(),be=c("button"),be.textContent="Clean Cache",f(x,"for","api-key"),f(x,"class","svelte-dhvrur"),f(C,"type","text"),f(C,"name","api-key"),f(C,"id","api-key"),f(C,"placeholder","API Key"),f(C,"class","svelte-dhvrur"),f(b,"class","input svelte-dhvrur"),f(E,"for","title"),f(E,"class","svelte-dhvrur"),f(S,"type","text"),f(S,"name","title"),f(S,"id","title"),f(S,"placeholder","Title"),f(S,"class","svelte-dhvrur"),f(w,"class","input svelte-dhvrur"),f(L,"for","description"),f(L,"class","svelte-dhvrur"),f(P,"type","text"),f(P,"name","description"),f(P,"id","description"),f(P,"placeholder","Description"),f(P,"class","svelte-dhvrur"),f(U,"class","input svelte-dhvrur"),f(F,"for","currency"),f(F,"class","svelte-dhvrur"),J.__value="EUR",J.value=J.__value,z.__value="CHF",z.value=z.__value,f(q,"name","currency"),f(q,"class","svelte-dhvrur"),void 0===t[3]&&A((()=>t[17].call(q))),f(R,"class","input svelte-dhvrur"),f(M,"for","price"),f(M,"class","svelte-dhvrur"),f(X,"type","number"),f(X,"name","price"),f(X,"id","price"),f(X,"placeholder","Price"),f(X,"class","svelte-dhvrur"),f(H,"class","input svelte-dhvrur"),f(ee,"for","template-id"),f(ee,"class","svelte-dhvrur"),f(ne,"type","text"),f(ne,"name","template-id"),f(ne,"id","template-id"),f(ne,"placeholder","Template ID"),f(ne,"class","svelte-dhvrur"),f(Z,"class","input svelte-dhvrur"),f(ie,"for","seller-id"),f(ie,"class","svelte-dhvrur"),f(oe,"type","number"),f(oe,"name","seller-id"),f(oe,"id","seller-id"),f(oe,"placeholder","Seller ID"),f(oe,"class","svelte-dhvrur"),f(le,"class","input svelte-dhvrur"),f(ue,"for","seller-email"),f(ue,"class","svelte-dhvrur"),f(pe,"type","email"),f(pe,"name","seller-email"),f(pe,"id","seller-email"),f(pe,"placeholder","Seller E-mail"),f(pe,"class","svelte-dhvrur"),f(ce,"class","input svelte-dhvrur"),f(he,"for","listing-url"),f(he,"class","svelte-dhvrur"),f(ge,"type","url"),f(ge,"name","listing-url"),f(ge,"id","listing-url"),f(ge,"placeholder","Listing URL"),f(ge,"class","svelte-dhvrur"),f(ve,"class","input svelte-dhvrur"),f($,"class","svelte-dhvrur"),f(n,"class","svelte-dhvrur")},m(e,r){o(e,n,r),Ce&&Ce.m(n,null),s(n,l),s(n,i),s(n,y),s(n,$),s($,b),s(b,x),s(b,_),s(b,C),m(C,t[0]),s($,I),s($,w),s(w,E),s(w,k),s(w,S),m(S,t[1]),s($,T),s($,U),s(U,L),s(U,D),s(U,P),m(P,t[2]),s($,K),s($,R),s(R,F),s(R,W),s(R,q),s(q,J),s(q,z),g(q,t[3]),s($,B),s($,H),s(H,M),s(M,G),s(M,Q),s(H,V),s(H,X),m(X,t[4]),s($,Y),s($,Z),s(Z,ee),s(Z,te),s(Z,ne),m(ne,t[5]),s($,re),s($,le),s(le,ie),s(le,se),s(le,oe),m(oe,t[6]),s($,ae),s($,ce),s(ce,ue),s(ce,de),s(ce,pe),m(pe,t[7]),s($,fe),s($,ve),s(ve,he),s(ve,me),s(ve,ge),m(ge,t[8]),s($,ye),Ee.m($,null),s(n,$e),s(n,be),xe||(_e=[p(C,"input",t[14]),p(S,"input",t[15]),p(P,"input",t[16]),p(q,"change",t[17]),p(X,"input",t[18]),p(ne,"input",t[19]),p(oe,"input",t[20]),p(pe,"input",t[21]),p(ge,"input",t[22]),p($,"submit",t[12]),p(be,"click",t[13])],xe=!0)},p(e,[t]){e[10].text?Ce?Ce.p(e,t):(Ce=N(e),Ce.c(),Ce.m(n,l)):Ce&&(Ce.d(1),Ce=null),1&t&&C.value!==e[0]&&m(C,e[0]),2&t&&S.value!==e[1]&&m(S,e[1]),4&t&&m(P,e[2]),8&t&&g(q,e[3]),8&t&&h(Q,e[3]),16&t&&v(X.value)!==e[4]&&m(X,e[4]),32&t&&ne.value!==e[5]&&m(ne,e[5]),64&t&&v(oe.value)!==e[6]&&m(oe,e[6]),128&t&&pe.value!==e[7]&&m(pe,e[7]),256&t&&m(ge,e[8]),we===(we=Ie(e))&&Ee?Ee.p(e,t):(Ee.d(1),Ee=we(e),Ee&&(Ee.c(),Ee.m($,null)))},i:e,o:e,d(e){e&&a(n),Ce&&Ce.d(),Ee.d(),xe=!1,r(_e)}}}function F(e,t,n){let r={},l=r.apiKey||"",i=r.title||"",s=r.description||"",o=r.currency||"EUR",a=r.price||"",c=r.listingId||"",u=r.sellerId||"",d=r.sellerEmail||"",p=r.listingUrl||"",f=!1,h={error:!1,text:""},m=!1;x((()=>{const e=localStorage.getItem("cache");if(e)try{r=JSON.parse(e),n(0,l=r.apiKey),n(1,i=r.title),n(2,s=r.description),n(3,o=r.currency),n(4,a=r.price),n(5,c=r.listingId),n(6,u=r.sellerId),n(7,d=r.sellerEmail),n(8,p=r.listingUrl)}catch(e){r={}}}));const g=(e,t=!1)=>{n(10,h={error:t,text:e})};return e.$$.update=()=>{511&e.$$.dirty&&n(9,f=!(l&&i&&s&&a&&o&&c&&u&&d&&p)),1&e.$$.dirty&&(e=>{const t=TripartieWebApi.ApiClient.instance,{ClientIdAuth:n}=t.authentications;n.apiKey=e})(l),511&e.$$.dirty&&(r={apiKey:l,sellerId:u,sellerEmail:d,title:i,description:s,price:a,currency:o,listingId:c,listingUrl:p})},[l,i,s,o,a,c,u,d,p,f,h,m,async e=>{e.preventDefault(),g("");try{n(11,m=!0),console.log(r),localStorage.setItem("cache",JSON.stringify(r)),await(async(e,t,n,r,l,i,s,o,a)=>{const c=new TripartieWebApi.UsersApi;let u;try{u=await c.fetch({externalId:e})}catch(e){console.log("user error",e)}u||await c.register({email:t,externalId:e});const d=new TripartieWebApi.TransactionTemplatesApi,p={title:n,description:r,subTotal:100*l,externalId:s,sellerExternalId:e,currency:i,flow:"objects",shippingProviders:"swiss-post",productCategory:"other",allowPriceChange:!1,adUrl:a};await d.create(p)})(u,d,i,s,a,o,c,0,p),g("Template created. Check admin dashboard to find it.")}catch(e){console.log(e),g(e.error.message||e.message||e.response.text,!0)}finally{n(11,m=!1)}},()=>{localStorage.removeItem("cache")},function(){l=this.value,n(0,l)},function(){i=this.value,n(1,i)},function(){s=this.value,n(2,s)},function(){o=function(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}(this),n(3,o)},function(){a=v(this.value),n(4,a)},function(){c=this.value,n(5,c)},function(){u=v(this.value),n(6,u)},function(){d=this.value,n(7,d)},function(){p=this.value,n(8,p)}]}return new class extends class{$destroy(){!function(e,t){const n=e.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}{constructor(e){super(),K(this,e,F,R,i,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
